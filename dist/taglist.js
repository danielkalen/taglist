!function(t){var e,n,i,o,s,r,p,l,a,u,c,d,h,f;return s=function(e,n,i){var o,s,r,p;i&&(n=t.extend({},n,i)),r=e[0]||e;for(o in n)switch(p=n[o],typeof p){case"object":this.applyStyles(r,p);break;case"function":s=p(this),"object"==typeof s?this.applyStyles(r,s):r.style[o]=s;break;default:r.style[o]=p}return e},h=function(t,e,n){var i;return i=new function(){var t;for(t in e)this[t]="";return this},this.applyStyles(t,i,n)},l=function(t,e){var n,i,o;return n=null!=e?"scale(scaleValue)":"",o="translate("+t+")",i=o+" "+n,{webkitTransform:i,mozTransform:i,msTransform:i,oTransform:i,transform:i}},p=function(t){return{webkitTransformOrigin:t+" 0%",mozTransformOrigin:t+" 0%",msTransformOrigin:t+" 0%",oTransformOrigin:t+" 0%",transformOrigin:t+" 0%"}},d=/matrix3?d?\((.+)\)/,c=/,\s*/,a=function(t){var e,n,i,o;return e=window.getComputedStyle(t.els.subnotice[0]),n=e.transform||e.webkitTransform||e.mozTransform,(null!=n?n.length:void 0)&&"none"!==n?(o=n.match(d)[1],i=o.split(c).slice(-1)[0]):i=0,parseFloat(i)},f={},f.container={position:"relative",textAlign:"left"},f.overlay={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",visibility:"hidden"},f.overlay.isRevealed={visibility:"visible"},f.addButton={position:"relative",display:"inline-block",padding:"0 5px",border:"2px dashed",fontSize:"23px",textAlign:"center",lineHeight:"22px",boxSizing:"border-box",cursor:"pointer",userSelect:"none",color:function(t){return t.list.options.tagTextColor}},f.tag={},f.tag.container={position:"relative",display:"inline-block",height:"28px",marginRight:"10px",padding:"0 20px 0 5px",fontSize:"13.2px",lineHeight:"28px",textAlign:"center",boxSizing:"border-box",cursor:"pointer",userSelect:"none",backgroundColor:function(t){return t.list.options.tagBGColor},color:function(t){return t.list.options.tagTextColor}},f.tag.removeButton={position:"absolute",right:"5px",top:"50%",transform:l("0 -50%"),fontSize:"17px",lineHeight:1,opacity:.6},f.popup={},f.popup.container={position:"fixed",backgroundColor:"white",borderRadius:"5px",boxShadow:"0px 3px 18px rgba(0,0,0,0.24)",opacity:0,boxSizing:"border-box"},f.popup.container.transition={transition:"transform 0.3s cubic-bezier(0.785, 0.135, 0.15, 0.86), -webkit-transform 0.3s cubic-bezier(0.785, 0.135, 0.15, 0.86), opacity 0.3s cubic-bezier(0.785, 0.135, 0.15, 0.86)"},f.popup.content={display:"none",padding:"20px",boxSizing:"border-box"},f.popup.content.isRevealed={display:"block"},f.popup.button={position:"relative",display:"none",height:"50px",boxSizing:"border-box",cursor:"pointer",userSelect:"none",backgroundColor:function(t){return t.list.options.buttonBGColor},color:function(t){return t.list.options.buttonTextColor}},f.popup.button.isRevealed={display:"block"},f.popup.button.text={position:"absolute",top:"53%",transform:l("0 -50%"),display:"block",width:"100%",fontSize:"16px",lineHeight:1,fontWeight:500,textAlign:"center",textTransform:"uppercase",letterSpacing:"0.3px"},f.popup.selectWrapper={position:"relative",width:"100%",height:"55px",borderBottom:"1px solid #ddd"},f.popup.selectFake={position:"absolute",zIndex:1,left:0,top:"53%",transform:l("0 -50%"),height:"16px",padding:"0 15px",fontSize:"16px",lineHeight:1,textAlign:"left",opacity:.6,userSelect:"none",boxSizing:"border-box"},f.popup.selectFake.hasColor={opacity:1},f.popup.selectInput={position:"absolute",zIndex:2,width:"100%",height:"100%",opacity:0},u={container:function(){return"<div class='TagList'></div>"},overlay:function(){return"<div class='TagList-overlay'></div>"},addButton:function(){return"<div class='TagList-addButton'> <div class='TagList-addButton-icon'>&#43;</div> </div>"},tag:{container:function(){return"<div class='TagList-Tag'></div>"},removeButton:function(){return"<div class='TagList-Tag-removeButton'>Ã—</div>"},text:function(){return"<div class='TagList-Tag-text'> <b>{{label}}</b>: {{value}} </div>"}},popup:{container:function(){return"<div class='TagList-Popup'></div>"},selectWrapper:function(){return"<div class='TagList-Popup-selectField'></div>"},selectFake:function(){return"<div class='TagList-Popup-selectField-fake'></div>"},selectInput:function(t){return"<select class='TagList-Popup-selectField-input'> <option value=''>Select "+t+"...</option> {{options}} </select>"},content:function(){return"<div class='TagList-Popup-content'></div>"},button:function(t){return"<div class='TagList-Popup-button'> <div class='TagList-Tag-button-text'>Add "+t+"</div> </div>"}}},r={default:{},itemLabel:"Option",tagBGColor:"#ccc",tagTextColor:"#000",buttonBGColor:"#f74425",buttonTextColor:"#fff"},n=function(e,n,i){return this.list=e,this.parent=n,this.hasSelect=i,this.applyStyles=s.bind(this),this.removeStyles=h.bind(this),this.isOpen=!1,this.currentOffset={x:0,y:0,scale:0},this.els={},this.els.container=t(u.popup.container()),this.els.content=t(u.popup.content()).appendTo(this.els.container),this.hasSelect&&(this.els.selectWrapper=t(u.popup.selectWrapper()).insertBefore(this.els.content),this.els.selectFake=t(u.popup.selectFake()).appendTo(this.els.selectWrapper),this.els.selectInput=t(u.popup.selectInput(this.list.options.itemLabel)).appendTo(this.els.selectWrapper),this.els.button=t(u.popup.button(this.list.options.itemLabel)).appendTo(this.els.container)),this.attachBindings(),this.appendToDOM(),this},n.prototype.appendToDOM=function(){return this.applyStyles(this.els.container,o.style.popup.container),this.applyStyles(this.els.content,o.style.popup.content),this.hasSelect&&(this.applyStyles(this.els.selectWrapper,o.style.popup.selectWrapper),this.applyStyles(this.els.selectFake,o.style.popup.selectFake),this.applyStyles(this.els.selectInput,o.style.popup.selectInput),this.applyStyles(this.els.button,o.style.popup.button),this.applyStyles(this.els.button.children(),o.style.popup.buttonText)),this.els.container.appendTo(this.parent)},n.prototype.attachBindings=function(){if(SimplyBind("windowScrollY").of(n).to(function(t){return function(e,n){return t.resetYPosition(e,n)}}(this)).condition(function(t){return function(e,n){return t.isOpen&&null!=n}}(this)),SimplyBind("windowScrollX").of(n).to(function(t){return function(e,n){return t.resetXPosition(e,n)}}(this)).condition(function(t){return function(e,n){return t.isOpen&&null!=n}}(this)),SimplyBind("windowWidth").of(n).to(function(t){return function(e,n){return t.resetWidth(e,n)}}(this)).condition(function(t){return function(){return t.isOpen}}(this)),SimplyBind("currentOffset",{updateOnBind:!1}).of(this).to(function(t){return function(e){return t.applyStyles(t.els.container,l(e.x+"px "+e.y+"px",e.scale))}}(this)),SimplyBind(0).ofEvent("click").of(this.list.els.overlay).to(function(t){return function(){return t.close()}}(this)),this.hasSelect)return SimplyBind("tagOptions").of(this.list).to("innerHTML.options").of(this.els.selectInput).transform(function(t){var e,n,i,o;for(o="",e=0,n=t.length;e<n;e++)i=t[e],o+="<option value='"+i.name+"'>"+i.label+"</option>";return o}),SimplyBind("value").of(this.els.selectInput).to("innerHTML").of(this.els.selectFake).and.to(function(t){return function(e){var n;return n=e?"applyStyles":"removeStyles",t[n](t.els.selectFake,o.style.popup.selectFake.hasColor),t[n](t.els.content,o.style.popup.content.isRevealed),t[n](t.els.button,o.style.popup.button.isRevealed)}}(this))},e={maxWidth:350,padding:20,offset:25},n.prototype.open=function(){var t;return t=new Promise(function(i){return function(s){var r,l,a;return i.isOpen?s():(i.list.closeAllPopups(),i.isOpen=!0,l=i.parent[0].getBoundingClientRect(),l.x=l.left,l.y=l.top,l.centerLeft=l.x+l.width/2,a={},a.y=l.y+l.height+e.offset,n.windowWidth>e.maxWidth+2*e.padding?a.width=e.maxWidth:(a.width=n.windowWidth-2*e.padding,a.x=e.padding),a.x||(a.x=l.centerLeft-a.width/2+e.padding,a.x<e.padding?a.x=e.padding:a.x+a.width+e.padding>n.windowWidth-e.padding&&(a.x=n.windowWidth-e.padding-a.width)),r=l.centerLeft-(a.x+a.width/2),a.scaleOrigin=a.width/2+r,i.els.container.insertAfter(i.list.els.overlay),i.applyStyles(i.list.els.overlay,o.style.overlay.isRevealed),i.applyStyles(i.els.container,o.style.popup.container.transition,{top:a.y+"px",left:a.x+"px",width:a.width+"px",opacity:1,transformOrigin:p(a.scaleOrigin+"px")}),i.currentOffset={x:0,y:0,scale:1},setTimeout(s,325),t.then(function(){return i.removeStyles(i.els.container,o.style.popup.container.transition)}))}}(this))},n.prototype.close=function(){var e;return e=new Promise(function(n){return function(i){return n.isOpen?(n.isOpen=!1,n.applyStyles(n.list.els.overlay,o.style.overlay),n.applyStyles(n.els.container,o.style.popup.container.transition,{opacity:0}),n.currentOffset=t.extend({},n.currentOffset,{scale:0}),setTimeout(i,325),e.then(function(){return n.removeStyles(n.els.container,o.style.popup.container.transition)})):i()}}(this))},n.prototype.resetYPosition=function(e,n){var i;return i=e+n,this.currentOffset=t.extend({},this.currentOffset,{y:this.currentOffset+i})},n.prototype.resetXPosition=function(e,n){var i;return i=e+n,this.currentOffset=t.extend({},this.currentOffset,{x:this.currentOffset+i})},n.prototype.resetWidth=function(t){return n.windowWidth>e.maxWidth+2*e.padding?targetDimensions.width=e.maxWidth:targetDimensions.width=n.windowWidth-2*e.padding},SimplyBind(0).ofEvent("scroll").of(window).to(function(){return n.windowScrollY=window.scrollY,n.windowScrollX=window.scrollX}),SimplyBind(0).ofEvent("resize").of(window).to(function(){return n.windowHeight=window.innerHeight,n.windowWidth=window.innerWidth}),n.windowScroll=window.scrollY,n.windowHeight=window.innerHeight,n.windowWidth=window.innerWidth,i=function(e,i,o,r){return this.list=e,this.options=i,this.data=null!=o?o:{},this.applyStyles=s.bind(this),this.removeStyles=h.bind(this),this.name=this.options.name,this.label=this.options.label,this.value=this.options.default||"",this.els={},this.els.container=t(u.tag.container()).data("Tag",this),this.els.text=t(u.tag.text()).appendTo(this.els.container),this.els.removeButton=t(u.tag.removeButton()).appendTo(this.els.container),this.popup=new n(this.list,this.els.container),r?t(r).appendTo(this.popup.els.content):t(this.options.content(this.data)).appendTo(this.popup.els.content),this.attachBindings(),this.appendToDOM(),this},i.prototype.appendToDOM=function(){return this.applyStyles(this.els.container,o.style.tag.container),this.applyStyles(this.els.removeButton,o.style.tag.removeButton),this.els.container.insertBefore(this.list.els.addButton)},i.prototype.attachBindings=function(){return SimplyBind("label").of(this).to("textContent.label").of(this.els.text).transform(function(t){return function(e){return t.options.labelFormatter?t.options.labelFormatter(e):e}}(this)),SimplyBind("value").of(this).to("textContent.value").of(this.els.text).transform(function(t){return function(e){return t.options.valueFormatter?t.options.valueFormatter(e):e}}(this)),SimplyBind(0).ofEvent("click").of(this.els.removeButton).to(function(t){return function(e){return t.remove(),e.stopPropagation()}}(this)),SimplyBind(0).ofEvent("click").of(this.els.container).to(function(t){return function(e){return t.popup.open()}}(this)),SimplyBind("value",{updateOnBind:!!this.data.value}).of(this.data).to("value").of(this)},i.prototype.remove=function(){return this.popup.close(),this.els.container.remove(),this.list.tags.splice(this.list.tags.indexOf(this),1)},o=function(e,i,o){var p,l,a,c,d,f,y;for(this.targetContainer=e,this.tagOptions=null!=i?i:[],this.applyStyles=s.bind(this),this.removeStyles=h.bind(this),this.options=t.extend(!0,{},r,o),this.tags=[],this.current={},this.els={},this.els.container=t(u.container()).data("TagList",this),this.els.overlay=t(u.overlay()).prependTo(document.body),this.els.addButton=t(u.addButton(this.options.itemLabel)).appendTo(this.els.container),this.popup=new n(this,this.els.addButton),d=this.tagOptions,a=0,c=d.length;a<c;a++)y=d[a],null==y.name&&(y.name=y.label);f=this.options.default;for(p in f)l=f[p],y=this.tagOptions.find(function(t){return t.name===p}),this.add({value:l},y);return this.attachBindings(),this.appendToDOM(),this},o.prototype.addTagOption=function(t){return this.tagOptions.push(t)},o.prototype.add=function(t,e,n){var o;return this.tags.push(o=new i(this,e,t,n)),SimplyBind("value",{updateOnBind:!1}).of(o).to(function(t){return function(){return t.triggerChange()}}(this))},o.prototype.appendToDOM=function(){return this.applyStyles(this.els.container,o.style.container),this.applyStyles(this.els.overlay,o.style.overlay),this.applyStyles(this.els.addButton,o.style.addButton),this.els.container.appendTo(this.targetContainer)},o.prototype.attachBindings=function(){return SimplyBind(0).ofEvent("click").of(this.els.addButton).to(function(t){return function(){return t.openPopup()}}(this)),SimplyBind(0).ofEvent("click").of(this.popup.els.button).to(function(t){return function(){return t.add(t.current.dataObj,t.current.tagOption,t.current.contentElement),t.popup.close().then(function(){return t.selectedTag=""})}}(this)),SimplyBind("value").of(this.popup.els.selectInput).to("selectedTag").of(this).bothWays().chainTo(function(e){return function(n){if(n)return e.current.dataObj={value:null},e.current.tagOption=e.tagOptions.find(function(t){return t.name===n}),e.current.contentElement=t(tagOption.content(e.current.dataObj)).appendTo()}}(this))},o.prototype.closeAllPopups=function(){var t,e,n,i,o;for(this.popup.close(),n=this.tags,i=[],t=0,e=n.length;t<e;t++)o=n[t],i.push(o.popup.close());return i},o.prototype.triggerChange=function(){var t,e,n;return e=this.tags,n=new function(){var t,n,i,o;for(i=[],t=0,n=e.length;t<n;t++)o=e[t],i.push(this[o.name]=o.value);return i},"function"==typeof(t=this.options).onChange?t.onChange(n,this):void 0},o.prototype.getTagOptionByName=function(t){return this.tagOptions.find(function(e){return e.name===t})},o.style=f,o.tagBGColor="#bebebe",o.tagTextColor="#000",o.version="1.0.0",window.TagList=o}(jQuery);